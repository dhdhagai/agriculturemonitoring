<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Log-in - Agriculture Monitoring</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet" />
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap" rel="stylesheet" />

    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <style>
        .login-container {
            max-width: 400px;
            margin: auto;
            padding: 20px;
            border: 1px solid #ccc;
            border-radius: 8px;
            margin-top: 50px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        #loginStatus {
            margin-top: 10px;
            font-size: 14px;
        }

        .text-container {
            max-width: 400px;
            margin: 20px auto;
            padding: 15px;
            border-radius: 8px;
            background-color: #f8f9fa;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            text-align: center;
        }
    </style>
</head>

<body>
    <script>
        let page = "login";
    </script>
    <div id="hm-nav"></div>

    <div class="login-container">
        <h2 class="text-center">Login</h2>
        <form id="loginForm">
            <div class="form-group">
                <label for="username">Username:</label>
                <input type="text" class="form-control" id="username" name="username" required>
            </div>
            <div class="form-group">
                <label for="password">Password:</label>
                <input type="password" class="form-control" id="password" name="password" required>
            </div>
            <button type="submit" class="btn btn-primary btn-block">Login</button>
        </form>
        <p id="loginStatus" class="text-center"></p>
    </div>

    <!-- New rounded text box container added here -->
    <div class="text-container">
        <p class="text-center">If you haven't created an account then <a href="signup.html">SignUp</a></p>
    </div>

    <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>

    <!-- Bootstrap JS (Optional, only if you need Bootstrap JS features) -->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

    <!-- Your custom script -->
    <script src="dark.js"></script>

    <div id="hm-footer"></div>
    <div class="container h-50 w-50"></div>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.1/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>

    <div class="form-check form-switch">
        <input type="checkbox" class="form-check-input" id="darkSwitch" sw1 />
        <label class="custom-control-label" for="darkSwitch">Dark Mode</label>
    </div>
    <script src="dark-mode-switch.min.js"></script>
    <script src="dark.js"></script>

    <script>
        // When the login form is submitted
        document.getElementById('loginForm').addEventListener('submit', function (event) {
            event.preventDefault(); // Prevent the form from submitting normally
            
            // Get the username and password from the form fields
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;

            // Validate inputs (simple check to make sure they aren't empty)
            if (username && password) {
                // Create an object to hold the login details
                const loginDetails = {
                    username: username,
                    password: password
                };

                // Convert the object to a JSON string
                const loginDetailsJSON = JSON.stringify(loginDetails);

                // Store the login details in a cookie called LOGIN_DETAILS for 30 days
                setCookie('LOGIN_DETAILS', loginDetailsJSON, 30);

                // Display a success message
                document.getElementById('loginStatus').innerText = "Login successful. Redirecting to HomePage...";

                // Redirect to the home page
                window.location.href = "/"; // Use window.location.href for proper redirection
            } else {
                // If username or password is empty, show an error message
                document.getElementById('loginStatus').innerText = "Please fill in both fields.";
            }
        });

        // Function to set a cookie
        function setCookie(name, value, days) {
            const expires = new Date();
            expires.setTime(expires.getTime() + (days * 24 * 60 * 60 * 1000)); // Set expiration in days
            document.cookie = `${name}=${value};expires=${expires.toUTCString()};path=/`;
        }

        // Function to get a cookie value by name
        function getCookie(name) {
            const match = document.cookie.match(new RegExp('(^| )' + name + '=([^;]+)'));
            if (match) return match[2];
            return null;
        }
    </script>

</body>

</html>
